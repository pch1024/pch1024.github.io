(window.webpackJsonp=window.webpackJsonp||[]).push([[32],{263:function(t,s,a){"use strict";a.r(s);var e=a(0),n=Object(e.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"前端安全防护"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#前端安全防护","aria-hidden":"true"}},[t._v("#")]),t._v(" 前端安全防护")]),t._v(" "),a("h2",{attrs:{id:"cookie"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#cookie","aria-hidden":"true"}},[t._v("#")]),t._v(" Cookie")]),t._v(" "),a("blockquote",[a("p",[t._v("Cookie 是服务端存储到浏览器的数据()，会在浏览器下次向同一服务端发起请求时被携带。")])]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 后端")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setcookie")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" value"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" expire"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" path"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" domain"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" HttpOnly"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 前端")]),t._v("\ndocument"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("cookie "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"username=John Doe;"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\ndocument"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("cookie "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"username=John Doe; expires=Thu, 18 Dec 2043 12:00:00 GMT;"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\ndocument"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("cookie "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"username=John Doe; expires=Thu, 18 Dec 2043 12:00:00 GMT; path=/"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br")])]),a("h3",{attrs:{id:"cookie-组成"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#cookie-组成","aria-hidden":"true"}},[t._v("#")]),t._v(" Cookie 组成")]),t._v(" "),a("ol",[a("li",[t._v("键值对数据")])]),t._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("username=John Doe;\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("ol",{attrs:{start:"2"}},[a("li",[t._v("过期时间 expires")])]),t._v(" "),a("p",[t._v("不设置日期，浏览器关闭之后它会被自动删除。")]),t._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("expires=Thu, 18 Dec 2043 12:00:00 GMT;\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("ol",{attrs:{start:"3"}},[a("li",[t._v("页面路径 path")])]),t._v(" "),a("p",[t._v("不设置 path，默认是 “/项目名/当前路径的上一层地址”。如果我们设置 path，如果当前访问的路径包含了 Cookie 的路径（当前访问路径在 Cookie 路径基础上要比 Cookie 的范围小）Cookie 就会加载 request 的对象之中。")]),t._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("path=/;\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("ol",{attrs:{start:"4"}},[a("li",[t._v("所属域名")])]),t._v(" "),a("p",[t._v("此域与当前域不匹配，则可视为“第三方 cookie”，将被浏览器拒绝。Cookie 支持跨域名访问，例如将 domain 属性设置为“.biaodianfu.com”，则以“.biaodianfu.com”为后缀的一切域名均能够访问该 Cookie。")]),t._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("domain=.csdn.net;\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("ol",{attrs:{start:"5"}},[a("li",[t._v("HttpOnly\n浏览器的 JavaScript 不可操作不可访问。")])]),t._v(" "),a("h3",{attrs:{id:"cookie-分类"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#cookie-分类","aria-hidden":"true"}},[t._v("#")]),t._v(" Cookie 分类")]),t._v(" "),a("ol",[a("li",[t._v("会话 cookie: cookie 不包含到期日期，浏览器关闭之后它会被自动删除。")]),t._v(" "),a("li",[t._v("持久性 cookie: cookie 包含到期日期，浏览器关闭之后不会删除。")])]),t._v(" "),a("h2",{attrs:{id:"xss"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#xss","aria-hidden":"true"}},[t._v("#")]),t._v(" XSS")]),t._v(" "),a("blockquote",[a("p",[t._v("Cross Site Script 跨站脚本攻击 (为区别 CSS 起名 XSS)")])]),t._v(" "),a("p",[t._v("对网站进进行脚本（可能是 JS、CSS、HTML、Flash）注入，通过网站进行传播危害（可能是窃取 cookie、session、重定向等）。")]),t._v(" "),a("p",[t._v("XSS 攻击目前分为 3 类：")]),t._v(" "),a("ol",[a("li",[t._v("反射型（非持久型")]),t._v(" "),a("li",[t._v("存储型（持久型）")]),t._v(" "),a("li",[t._v("基于 DOM。")])]),t._v(" "),a("p",[t._v("XSS 攻击的防范")]),t._v(" "),a("ol",[a("li",[t._v("HttpOnly 防止 JS 脚本劫取 Cookie")]),t._v(" "),a("li",[t._v("用户输入检查")]),t._v(" "),a("li",[t._v("用户输出检查")])]),t._v(" "),a("h2",{attrs:{id:"csrf"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#csrf","aria-hidden":"true"}},[t._v("#")]),t._v(" CSRF")]),t._v(" "),a("blockquote",[a("p",[t._v("Cross Site Request Forgery 跨站请求伪造，是一种劫持受信任用户向服务器发送非预期请求的攻击方式 (一般需要先 XSS 再进行 CSRF)。")])]),t._v(" "),a("p",[t._v("攻击者通过 "),a("code",[t._v("XSS")]),t._v(" 对网站进行脚本注入并获取到用户身份令牌 "),a("code",[t._v("cookie")]),t._v("，然后使用"),a("code",[t._v("用户身份令牌")]),t._v("将自己伪装成当前用户对服务器发起"),a("code",[t._v("请求")]),t._v("，完成一次危害攻击。")]),t._v(" "),a("p",[t._v("CSRF 攻击的防范")]),t._v(" "),a("ol",[a("li",[t._v("验证码")])]),t._v(" "),a("p",[t._v("CSRF 攻击往往是在用户不知情的情况下构造了网络请求。但因为不能给网站所有的操作都加上验证码, 因此验证码只能作为防御 CSRF 的一种辅助手段")]),t._v(" "),a("ol",{attrs:{start:"2"}},[a("li",[t._v("Referer Check")])]),t._v(" "),a("p",[t._v("根据 HTTP 协议，在 HTTP 头中有一个字段叫 Referer，它记录了该 HTTP 请求的来源地址。通过 Referer Check，可以检查请求是否来自合法的”源”。")]),t._v(" "),a("ol",{attrs:{start:"3"}},[a("li",[t._v("添加 token 验证")])]),t._v(" "),a("p",[t._v("当 "),a("code",[t._v("cookie")]),t._v("被盗用时，可以在 HTTP 请求中以参数的形式加入一个随机产生的 token，并在服务器端建立一个拦截器来验证这个 token，如果请求中没有 token 或者 token 内容不正确，则认为可能是 CSRF 攻击而拒绝该请求。")]),t._v(" "),a("h2",{attrs:{id:"sso-单点登录和退出"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#sso-单点登录和退出","aria-hidden":"true"}},[t._v("#")]),t._v(" SSO 单点登录和退出")]),t._v(" "),a("ul",[a("li",[t._v("jsonp")]),t._v(" "),a("li",[t._v("iframe + postMessage 登录和注销")])])])}),[],!1,null,null,null);s.default=n.exports}}]);